!function(){"use strict";function t(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=n(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return s=t.done,t},e:function(t){c=!0,r=t},f:function(){try{s||null==o.return||o.return()}finally{if(c)throw r}}}}function e(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}(self.webpackChunktwenty_one=self.webpackChunktwenty_one||[]).push([[261],{261:function(n,o,i){i.r(o),i.d(o,{FreeCellModule:function(){return X}});var s=i(8583),c=i(5059),l=i(3423),u=i(2340),d=i(4762),g=i(1568),f=i(9765),p=i(6782),h=i(3815),m=i(7716),v=i(9799),b=i(9195),C=i(1095),x=i(1306);function y(t,e){if(1&t&&(m.TgZ(0,"tr"),m.TgZ(1,"td"),m._uU(2),m.qZA(),m.TgZ(3,"td"),m._uU(4),m.qZA(),m.qZA()),2&t){var n=e.$implicit,o=m.oxw();m.xp6(2),m.Oqu(n.name),m.xp6(2),m.Oqu(n.value(o.stats))}}var _,Z=function(t,e){return{show:t,sidebar:e}},O=function(t,e){return{"modal-xl":t,"modal-lg":e}},w=function(t,e){return{"col-lg-6":t,"col-xl-4":e}},k=function(t){return{show:t}},P=((_=function(){function t(e,n,o){var i=this;a(this,t),this.freeCell=e,this.twentyone=n,this.appRef=o,this.rows=[{name:"Total Hands Played",value:function(t){return"".concat(t.gamesPlayed)}},{name:"Winning Streak",value:function(t){return"".concat(t.wins||"")}},{name:"Best Winning Streak",value:function(t){return"".concat(t.maxWins||"")}},{name:"Losiing Streak",value:function(t){return"".concat(t.losses||"")}},{name:"Worst Losing Streak",value:function(t){return"".concat(t.maxLose||"")}},{name:"Total Games Won",value:function(t){return"".concat(t.totalWins)}},{name:"Total Games Lost",value:function(t){return"".concat(t.totalLosses)}}],this.destroyed$=new f.xQ,this.trackByFn=function(t){return t},this.freeCell.gameStats$.pipe((0,p.R)(this.destroyed$)).subscribe(function(t){return i.stats=t}),this.twentyone.settings$.pipe((0,p.R)(this.destroyed$)).subscribe(function(t){return i.settings=t})}return r(t,[{key:"ngOnInit",value:function(){var t=this;setTimeout(function(){return t.show=!0},0)}},{key:"close",value:function(){var t=this;this.show=!1,setTimeout(function(){t.appRef.detachView(t.componentRef.hostView),t.componentRef.destroy()},180)}},{key:"setSidebar",value:function(){this.settings.sidebar=!this.settings.sidebar,this.twentyone.saveSettings(this.settings)}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),t}()).\u0275fac=function(t){return new(t||_)(m.Y36(v.P),m.Y36(b.K),m.Y36(m.z2F))},_.\u0275cmp=m.Xpm({type:_,selectors:[["ng-component"]],inputs:{componentRef:"componentRef"},decls:55,vars:65,consts:[[1,"modal","fade",3,"ngClass","click"],[3,"ngClass","click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["href","#",1,"tab-loop",3,"focus"],["mdAutoFocus","","type","button",1,"btn-resize",3,"click"],["first",""],["height","25px","alt","Window Resize",3,"src"],["type","button","aria-label","Close",1,"button-close",3,"click"],["src","/assets/img/close.svg","height","25px","alt","Window Resize"],[1,"modal-body"],[1,"row","d-flex","justify-content-center"],[1,"col-sm-12",3,"ngClass"],[1,"table","table-sm","w-100"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"progress"],["role","progressbar","aria-valuenow","0","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-info"],["role","progressbar","aria-valuenow","0","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-danger"],["role","progressbar","aria-valuenow","0","aria-valuemin","0","aria-valuemax","100"],[1,"modal-footer"],["type","button","mat-stroked-button","","color","primary",3,"click"],["last",""],[1,"modal-backdrop","fade",3,"ngClass"]],template:function(t,e){if(1&t){var n=m.EpF();m.TgZ(0,"div",0),m.NdJ("click",function(){return e.close()}),m.TgZ(1,"div",1),m.NdJ("click",function(t){return t.stopPropagation()}),m.ALo(2,"keyvalue"),m.ALo(3,"keyvalue"),m.TgZ(4,"div",2),m.TgZ(5,"div",3),m.TgZ(6,"h5",4),m._uU(7,"FreeCell Stats"),m.qZA(),m.TgZ(8,"a",5),m.NdJ("focus",function(){return m.CHM(n),m.MAs(50).focus()}),m._uU(9,"to last"),m.qZA(),m.TgZ(10,"button",6,7),m.NdJ("click",function(){return e.setSidebar()}),m._UZ(12,"img",8),m.qZA(),m.TgZ(13,"button",9),m.NdJ("click",function(){return e.close()}),m._UZ(14,"img",10),m.qZA(),m.qZA(),m.TgZ(15,"div",11),m.TgZ(16,"div",12),m.TgZ(17,"div",13),m.ALo(18,"keyvalue"),m.ALo(19,"keyvalue"),m.TgZ(20,"table",14),m.TgZ(21,"tbody"),m.YNc(22,y,5,2,"tr",15),m.qZA(),m.qZA(),m.TgZ(23,"label"),m._uU(24,"Wins vs Losses"),m.qZA(),m.TgZ(25,"div",16),m.TgZ(26,"div",17),m.ALo(27,"percent"),m._uU(28),m.ALo(29,"percent"),m.qZA(),m.TgZ(30,"div",18),m.ALo(31,"percent"),m._uU(32),m.ALo(33,"percent"),m.qZA(),m.qZA(),m.TgZ(34,"label"),m._uU(35,"Wins : Best Winning Streak"),m.qZA(),m.TgZ(36,"div",16),m.TgZ(37,"div",19),m.ALo(38,"appPercentBar"),m.ALo(39,"percent"),m._uU(40),m.qZA(),m.qZA(),m.TgZ(41,"label"),m._uU(42,"Losses : Worst Losing Streak"),m.qZA(),m.TgZ(43,"div",16),m.TgZ(44,"div",19),m.ALo(45,"appPercentBar"),m.ALo(46,"percent"),m._uU(47),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(48,"div",20),m.TgZ(49,"button",21,22),m.NdJ("click",function(){return e.close()}),m._uU(51," Close "),m.qZA(),m.TgZ(52,"a",5),m.NdJ("focus",function(){return m.CHM(n),m.MAs(11).focus()}),m._uU(53,"to last"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m._UZ(54,"div",23)}2&t&&(m.Q6J("ngClass",m.WLB(54,Z,e.show,e.settings.sidebar)),m.xp6(1),m.Gre("modal-dialog modal-dialog-centered modal-dialog-scrollable",e.settings.sidebar?"":" modal-xl",""),m.Q6J("ngClass",m.WLB(57,O,!e.settings.sidebar&&m.lcZ(2,30,e.stats).length>2,!e.settings.sidebar&&m.lcZ(3,32,e.stats).length>1)),m.xp6(11),m.MGl("src","/assets/img/",null!=e.settings&&e.settings.sidebar?"dice-1.svg":"arrow-right-square.svg","",m.LSH),m.xp6(5),m.Q6J("ngClass",m.WLB(60,w,!(null!=e.settings&&e.settings.sidebar)&&m.lcZ(18,34,e.stats).length>1,!(null!=e.settings&&e.settings.sidebar)&&m.lcZ(19,36,e.stats).length>2)),m.xp6(5),m.Q6J("ngForOf",e.rows)("ngForTrackBy",e.trackByFn),m.xp6(4),m.Udp("width",e.stats.totalWins+e.stats.totalLosses===0?0:m.lcZ(27,38,e.stats.totalWins/(e.stats.totalWins+e.stats.totalLosses))),m.xp6(2),m.hij(" Won: ",m.lcZ(29,40,e.stats.totalWins/(e.stats.totalWins+e.stats.totalLosses))," "),m.xp6(2),m.Udp("width",e.stats.totalWins+e.stats.totalLosses===0?0:m.lcZ(31,42,e.stats.totalLosses/(e.stats.totalWins+e.stats.totalLosses))),m.xp6(2),m.hij(" Lost: ",m.lcZ(33,44,e.stats.totalLosses/(e.stats.totalWins+e.stats.totalLosses))," "),m.xp6(5),m.Gre("progress-bar ",0===e.stats.maxWins?"bg-danger":m.lcZ(38,46,e.stats.wins/e.stats.maxWins),""),m.Udp("width",0===e.stats.maxWins?0:m.lcZ(39,48,e.stats.wins/e.stats.maxWins)),m.xp6(3),m.AsE(" ",e.stats.wins," : ",e.stats.maxWins," "),m.xp6(4),m.Gre("progress-bar ",0===e.stats.maxLose?"bg-success":m.lcZ(45,50,1-e.stats.losses/e.stats.maxLose),""),m.Udp("width",0===e.stats.maxLose?0:m.lcZ(46,52,e.stats.losses/e.stats.maxLose)),m.xp6(3),m.AsE(" ",e.stats.losses," : ",e.stats.maxLose," "),m.xp6(7),m.Q6J("ngClass",m.VKq(63,k,e.show)))},directives:[s.mk,s.sg,C.lW],pipes:[s.Nd,s.Zx,x.g],styles:["h2[_ngcontent-%COMP%]{margin:0}label[_ngcontent-%COMP%]{font-weight:600}.progress[_ngcontent-%COMP%]{margin-bottom:12px}"]}),_),M=i(3671),T=i(9004),A=i(1026),S=i(4252),q=i(3949),F=function(t,e){return{"undo-drag":t,dragging:e}},L=function(t,e){return{top:t,left:e}},U=function(){var n=function(){function n(t,e,o){var i=this;a(this,n),this.window=t,this.freeCell=e,this.soundService=o,this.dragging=!1,this.dragged=!1,this.lastX=0,this.lastY=0,this.posX=0,this.posY=0,this.undoDrag=!1,this.tableau=[],this.freeCells=[],this.foundation=[],this.destroyed$=new f.xQ,this.trackByFn=function(t){return t},this.window.mousetouchmove$.pipe((0,p.R)(this.destroyed$)).subscribe(function(t){return i.doDrag(t)}),this.window.mousetouchend$.pipe((0,p.R)(this.destroyed$)).subscribe(function(t){return i.endDrag(t)})}return r(n,[{key:"start",value:function(t){t.preventDefault(),this.startElement=t.target,this.card&&(document.body.classList.add("dragging"),this.dragging=!0,this.soundService.playSound("card-sound"))}},{key:"doDrag",value:function(t){t.preventDefault();var e=t.clientX||h.get(t,"touches[0].clientX"),n=t.clientY||h.get(t,"touches[0].clientY"),o=void 0!==t.clientX||!t.touches[1];(Math.abs(this.posX)>10||Math.abs(this.posY)>10)&&(this.dragged=!0),this.dragging&&o&&(this.lastX&&(this.posX+=e-this.lastX,this.posY+=n-this.lastY),this.lastX=e,this.lastY=n)}},{key:"endDrag",value:function(t){document.body.classList.remove("dragging");var n,o=!0,a=h.get(t,"changedTouches[0]");if(n=a?document.elementFromPoint(a.clientX,a.clientY):document.elementFromPoint(t.x,t.y),this.dragging)if(this.dragged){var i;if(n&&(i=n.getAttribute("data-column")),i){var r=this.card,s=Math.floor(r/4),c=r%4;if(+i<0)0===this.freeCells[-i-1]&&(this.freeCells[-i-1]=this.card,this.freeCells[this.index]=0);else if(+i>7){if(this.foundation[+i-8].length+1===s){var l=this.foundation[+i-8][this.foundation[+i-8].length-1];l&&c!==h.get(l,"card",l)%4||(this.foundation[+i-8].push(this.card),this.freeCells[this.index]=0)}}else{var u=this.tableau[i][this.tableau[i].length-1],d=0,g=0;u&&(d=Math.floor(u.card/4),g=u.card%4),(s===d-1&&c%2!=g%2||0===d)&&(this.tableau[i].push({card:this.card,flip:!1}),this.tableau[i]=e(this.tableau[i]),this.freeCells[this.index]=0,o=!1)}this.freeCell.checkWin(this.foundation)}o&&this.resetDrag()}else this.toFoundation();this.dragging=!1,this.dragged=!1,this.posX=0,this.posY=0,this.lastX=0,this.lastY=0}},{key:"resetDrag",value:function(){var t=this;setTimeout(function(){return t.soundService.playSound("card-sound")},180),this.undoDrag=!0,clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.posX=0,t.posY=0,t.lastX=0,t.lastY=0,t.timeout=setTimeout(function(){return t.undoDrag=!1},180)},0)}},{key:"toFoundation",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,o,a,i,r,s,c,l,u,d,g,f,p,m,v,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.card,o=Math.floor(n/4),a=n%4,i=0,r=!0,s=t(this.foundation),e.prev=3,s.s();case 5:if((c=s.n()).done){e.next=16;break}if((l=c.value).length+1!==o){e.next=13;break}if((u=l[l.length-1])&&a!==h.get(u,"card",u)%4){e.next=13;break}return d=document.getElementsByClassName("foundation-".concat(i))[0],g=this.startElement.getBoundingClientRect(),f=g.left,p=g.top,m=d.getBoundingClientRect(),v=m.left,b=m.top,this.foundation[i].push({card:this.card,offsetX:f-v,offsetY:p-b,deg:0,scale:1.1}),r=!1,this.freeCells[this.index]=0,this.freeCell.checkWin(this.foundation),e.abrupt("break",16);case 13:i++;case 14:e.next=5;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),s.e(e.t0);case 21:return e.prev=21,s.f(),e.finish(21);case 24:r&&this.soundService.playSound("card-sound");case 25:case"end":return e.stop()}},e,this,[[3,18,21,24]])}))}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),n}();return n.\u0275fac=function(t){return new(t||n)(m.Y36(T.u),m.Y36(v.P),m.Y36(S.y))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-card-cell"]],inputs:{tableau:"tableau",freeCells:"freeCells",foundation:"foundation",card:"card",column:"column",index:"index",animate:"animate"},decls:4,vars:19,consts:[["src","/assets/img/card-placeholder.png","alt","Card Placeholder",1,"card-placeholder",2,"position","relative"],[1,"card-group","block","text-center","position-absolute","w-100",3,"ngClass","ngStyle"],[3,"card","cardSound","column","animate","pos","mousedown","touchstart"]],template:function(t,e){1&t&&(m.TgZ(0,"div"),m._UZ(1,"img",0),m.TgZ(2,"div",1),m.TgZ(3,"app-card",2),m.NdJ("mousedown",function(t){return e.start(t)})("touchstart",function(t){return e.start(t)}),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(1),m.Gre("freeceell-",e.index,""),m.uIk("data-column",-e.index-1),m.xp6(1),m.Q6J("ngClass",m.WLB(13,F,e.undoDrag,e.dragging))("ngStyle",m.WLB(16,L,e.posY+"px",e.posX+"px")),m.xp6(1),m.Udp("position","absolute"),m.Q6J("card",e.card)("cardSound",!1)("column",-e.index-1)("animate",!1)("pos","relative"))},directives:[s.mk,s.PC,q.A],styles:[".card-group[_ngcontent-%COMP%]{position:relative}.card-group[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{margin:0 auto;display:inline-block}.card-placeholder[_ngcontent-%COMP%]{background:rgba(0,0,0,.15);margin:4px auto}.dragging[_ngcontent-%COMP%]{pointer-events:none;touch-action:none}.undo-drag[_ngcontent-%COMP%]{transition:all .18s ease-in-out}.dragging[_ngcontent-%COMP%], .undo-drag[_ngcontent-%COMP%]{z-index:100;transform:scale(1.1);-moz-filter:drop-shadow(-2px -2px 8px rgba(0,0,0,.5));filter:drop-shadow(-2px -2px 8px rgba(0,0,0,.5))}.card-stack[_ngcontent-%COMP%]{position:absolute;width:100%;top:0;left:0}.col-stock[_ngcontent-%COMP%], .col-talon[_ngcontent-%COMP%], .col-foundation[_ngcontent-%COMP%], .col-tableau[_ngcontent-%COMP%], .col-space[_ngcontent-%COMP%]{padding-left:1.5%;padding-right:1.5%;padding-bottom:1.5%;flex:0 0 auto;width:12.5%}.col-stock[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .col-talon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .col-foundation[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .col-tableau[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .col-space[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:0 auto;position:relative}.col-foundation[_ngcontent-%COMP%]{width:11.875%}.col-space[_ngcontent-%COMP%]{width:5%}.col-stock[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%], .col-tableau[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%], .col-foundation[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{margin:0 auto;height:unset;top:0;left:0%}  app-card-cell{position:relative}  app-card-cell app-card{width:100%;top:0;left:0}"]}),n}(),W=i(1276);function Y(t,e){if(1&t&&(m.TgZ(0,"div",8),m._UZ(1,"app-card-cell",9,10),m.qZA()),2&t){var n=e.$implicit,o=e.index,a=m.oxw();m.xp6(1),m.Q6J("card",n)("freeCells",a.freeCells)("tableau",a.tableau)("foundation",a.foundation)("animate",a.animate)("index",o)}}function $(t,e){if(1&t&&m._UZ(0,"app-card",13),2&t){var n=e.$implicit,o=m.oxw().index,a=m.oxw();m.Udp("position","absolute"),m.Q6J("card",n)("cardSound",a.cardSound)("column",o+8)("animate",!1)("pos","relative")}}function B(t,e){if(1&t&&(m.TgZ(0,"div",8),m.TgZ(1,"div"),m._UZ(2,"img",11),m.YNc(3,$,1,7,"app-card",12),m.qZA(),m.qZA()),2&t){var n=e.$implicit,o=e.index;m.xp6(2),m.Gre("foundation-",o,""),m.uIk("data-column",o+8),m.xp6(1),m.Q6J("ngForOf",n)}}function J(t,e){if(1&t&&m._UZ(0,"app-free-cell-group",17),2&t){var n=m.oxw(),o=n.$implicit,a=n.index,i=m.oxw();m.Q6J("tableau",i.tableau)("foundation",i.foundation)("cards",o)("column",a)("animate",i.animate)("cardSound",i.cardSound)("index",o.length-1)("freeCells",i.freeCells)}}function R(t,e){if(1&t&&(m.TgZ(0,"div",14),m.TgZ(1,"div"),m._UZ(2,"img",15),m.YNc(3,J,1,8,"app-free-cell-group",16),m.qZA(),m.qZA()),2&t){var n=e.$implicit,o=e.index;m.uIk("data-column",o),m.xp6(2),m.Udp("position",n.length?"absolute":"relative"),m.uIk("data-column",o),m.xp6(1),m.Q6J("ngIf",n.length)}}function N(t,e){1&t&&m._UZ(0,"div",18)}var Q=l.Bz.forChild([{path:"",component:function(){var t=function(){function t(e,n,o,i){a(this,t),this.freeCell=e,this.cardService=n,this.window=o,this.ref=i,this.hasStats=!1,this.freeCells=[0,0,0,0],this.tableau=[[],[],[],[],[],[],[],[]],this.foundation=[[],[],[],[]],this.landscape=!1,this.animate=!1,this.cardSound=!1,this.won=!1,this.dealing=!1,this.destroyed$=new f.xQ,this.trackByFn=function(t){return t}}return r(t,[{key:"ngOnInit",value:function(){this.subscribeToGame(),this.subscribeToStats(),this.subscribeToSave()}},{key:"subscribeToGame",value:function(){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.freeCell.game$.pipe((0,p.R)(this.destroyed$)).subscribe(function(t){return(0,d.mG)(n,void 0,void 0,regeneratorRuntime.mark(function n(){var o,a,i,r,s=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.foundation=t.foundation.map(function(t){return t.map(function(t){return t.card||t})}),Object.assign(this,h.omit(t,["stock"])),!t.stock){n.next=24;break}this.dealing=!0,o=t.stock,delete t.stock,this.animate=!0,this.cardSound=!0,a=0;case 5:if(!(a<7)){n.next=21;break}i=0;case 7:if(!(i<8)){n.next=18;break}if(r=o.pop()){n.next=11;break}return n.abrupt("break",18);case 11:return this.tableau[i].push({card:r,flip:!1}),this.tableau[i]=e(this.tableau[i]),n.next=15,new Promise(function(t){return setTimeout(t,200)});case 15:i++,n.next=7;break;case 18:a++,n.next=5;break;case 21:this.animate=!1,this.save(),this.dealing=!1,n.next=25;break;case 24:this.animate=!1,this.cardSound=!1,setTimeout(function(){return s.cardSound=!0},0);case 25:return n.next=27,new Promise(function(t){return setTimeout(t,100)});case 27:this.cardSound=!0;case 28:case"end":return n.stop()}},n,this)}))});case 1:case"end":return t.stop()}},t,this)}))}},{key:"subscribeToStats",value:function(){var t=this;this.freeCell.gameStats$.pipe((0,p.R)(this.destroyed$)).subscribe(function(e){return t.hasStats=!h.isEmpty(e)})}},{key:"subscribeToSave",value:function(){var t=this;this.freeCell.triggerSave$.pipe((0,p.R)(this.destroyed$)).subscribe(function(){t.save()})}},{key:"doEvent",value:function(t){switch(t){case"restart":var e=this.foundation.reduce(function(t,e){return t+e.length},0);!this.freeCell.game.new&&e<52&&(this.freeCell.gameResult="lose");var n=new g.e;n.stock=this.cardService.shuffleCards(),delete n.new,this.freeCell.game=n;break;case"stats":this.window.loadComponent(P)}}},{key:"save",value:function(){this.freeCell.saveGame({freeCells:this.freeCells,tableau:this.tableau,foundation:this.foundation.map(function(t){return t.map(function(t){return h.get(t,"card",t)})}),won:this.won})}},{key:"ngOnDestroy",value:function(){this.destroyed$.next(),this.destroyed$.complete()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(m.Y36(v.P),m.Y36(M.J),m.Y36(T.u),m.Y36(m.sBO))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-free-cell"]],decls:13,vars:15,consts:[[1,"free-cell-container","noselect","height-100","position-fixed"],["heading","FreeCell","restart","",3,"hasStats","restartDisabled","action"],[1,"container-xl","height-100"],[1,"row"],["class","col-stock d-flex flex-direction-column col-foundation",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-space"],["class","col-tableau d-flex flex-column height-100",4,"ngFor","ngForOf","ngForTrackBy"],["class","mask",4,"ngIf"],[1,"col-stock","d-flex","flex-direction-column","col-foundation"],[3,"card","freeCells","tableau","foundation","animate","index"],["cardTalon",""],["src","/assets/img/card-placeholder.png","alt","Card Placeholder",1,"card-placeholder",2,"position","relative"],[3,"card","cardSound","column","animate","pos","position",4,"ngFor","ngForOf"],[3,"card","cardSound","column","animate","pos"],[1,"col-tableau","d-flex","flex-column","height-100"],["src","/assets/img/card-placeholder.png","alt","Card Placeholder",1,"card-placeholder"],[3,"tableau","foundation","cards","column","animate","cardSound","index","freeCells",4,"ngIf"],[3,"tableau","foundation","cards","column","animate","cardSound","index","freeCells"],[1,"mask"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"app-nav",1),m.NdJ("action",function(t){return e.doEvent(t)}),m.qZA(),m.TgZ(2,"div",2),m.TgZ(3,"div",3),m.TgZ(4,"div"),m.TgZ(5,"div",3),m.YNc(6,Y,3,6,"div",4),m._UZ(7,"div",5),m.YNc(8,B,4,5,"div",4),m.TgZ(9,"div"),m.TgZ(10,"div",3),m.YNc(11,R,4,5,"div",6),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.YNc(12,N,1,0,"div",7),m.qZA(),m.qZA()),2&t&&(m.xp6(1),m.Q6J("hasStats",e.hasStats)("restartDisabled",e.dealing),m.xp6(3),m.Tol(e.landscape?"col-sm-2":"col-sm-12"),m.xp6(2),m.Q6J("ngForOf",e.freeCells)("ngForTrackBy",e.trackByFn),m.xp6(2),m.Q6J("ngForOf",e.foundation)("ngForTrackBy",e.trackByFn),m.xp6(1),m.Tol(e.landscape?"col-sm-10":"col-sm-12"),m.xp6(2),m.Q6J("ngForOf",e.tableau)("ngForTrackBy",e.trackByFn),m.xp6(1),m.Q6J("ngIf",e.dealing))},directives:[A.r,s.sg,s.O5,U,q.A,W.M],styles:[".free-cell-container[_ngcontent-%COMP%]{background:url(/assets/img/felt.jpg);height:100%;width:100%;min-width:320px;min-height:320px;position:fixed;padding:50px 15px 15px;top:0;left:0}.free-cell-container[_ngcontent-%COMP%]     .card{width:100%}.free-cell-container[_ngcontent-%COMP%]     .card-placeholder{width:95%}.free-cell-container[_ngcontent-%COMP%]   .col-stock[_ngcontent-%COMP%], .free-cell-container[_ngcontent-%COMP%]   .col-talon[_ngcontent-%COMP%], .free-cell-container[_ngcontent-%COMP%]   .col-foundation[_ngcontent-%COMP%], .free-cell-container[_ngcontent-%COMP%]   .col-tableau[_ngcontent-%COMP%], .free-cell-container[_ngcontent-%COMP%]   .col-space[_ngcontent-%COMP%]{padding-left:1.5%;padding-right:1.5%;padding-bottom:1.5%;flex:0 0 auto;width:12.5%}.free-cell-container[_ngcontent-%COMP%]   .col-stock[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .free-cell-container[_ngcontent-%COMP%]   .col-talon[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .free-cell-container[_ngcontent-%COMP%]   .col-foundation[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .free-cell-container[_ngcontent-%COMP%]   .col-tableau[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .free-cell-container[_ngcontent-%COMP%]   .col-space[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:0 auto;position:relative}.free-cell-container[_ngcontent-%COMP%]   .col-foundation[_ngcontent-%COMP%]{width:11.875%}.free-cell-container[_ngcontent-%COMP%]   .col-space[_ngcontent-%COMP%]{width:5%}.free-cell-container[_ngcontent-%COMP%]   .col-stock[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%], .free-cell-container[_ngcontent-%COMP%]   .col-tableau[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%], .free-cell-container[_ngcontent-%COMP%]   .col-foundation[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{margin:0 auto;height:unset;top:0;left:0%}.free-cell-container[_ngcontent-%COMP%]   .card-placeholder[_ngcontent-%COMP%]{position:absolute;background:rgba(0,0,0,.15);margin:4px;top:0;left:0}.free-cell-container[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;top:0;left:0;z-index:1000}@media screen and (max-width: 768px){.free-cell-container[_ngcontent-%COMP%]   .container-xl[_ngcontent-%COMP%]{padding-left:1%;padding-right:1%}.free-cell-container[_ngcontent-%COMP%]   .col-stock[_ngcontent-%COMP%], .free-cell-container[_ngcontent-%COMP%]   .col-tableau[_ngcontent-%COMP%], .free-cell-container[_ngcontent-%COMP%]   .col-foundation[_ngcontent-%COMP%]{padding-left:1%;padding-right:1%}.free-cell-container[_ngcontent-%COMP%]     .card:not(.hide){background-image:url(/assets/img/cards-small.png)!important}}"]}),t}(),data:{view:"free-cell",seo:{title:"FreeCell | Technically Tom",metaTags:[{name:"description",content:"Free card game web app with support for playing off line."},{property:"og:title",content:"FreeCell | Technically Tom | Technically Tom's Free Cell"},{proprety:"og:description",content:"Free card game web app with support for playing off line."},{property:"og:image",content:u.N.appUrl+"assets/img/solitaire.jpg"},{property:"og:image:width",content:"1200"},{property:"og:image:height",content:"630"},{property:"og:url",content:u.N.appUrl+"free-cell"},{name:"twitter:card",content:"website"}]}}}]),X=function(){var t=function t(){a(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[s.ez,c.m,Q]]}),t}()}}])}();